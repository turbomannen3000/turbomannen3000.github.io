<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@300;700&display=swap" rel="stylesheet"> <!-- Länk till Google Fonts -->
    <style>
        body {
            font-family: 'Fraunces', serif; /* Använd Fraunces för hela sidan */
            background-color: black; /* Initialt svart bakgrund */
            color: white; /* Vit text initialt */
            margin: 0;
            overflow: hidden; /* Inaktivera scrollning under animationen */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        /* Initial stil för header */
        header {
            text-align: center;
            font-size: 2rem; /* Justera rubrikens storlek */
            font-weight: 700;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* Centrera headern */
            opacity: 1; /* Full synlighet */
            transition: top 2s ease-in-out, left 2s ease-in-out, transform 2s ease-in-out; /* Mjukare övergång */
        }

        /* Klass för animerad positionering diagonalt uppåt till vänster */
        .move-header {
            top: 0;
            left: 0;
            transform: translate(0, 0); /* Flytta diagonalt till övre vänstra hörnet */
        }

        /* När sidan är fullt inladdad */
        body.loaded {
            background-color: #f0f0f0;
            color: #333;
            overflow: auto; /* Aktivera scrollning */
        }

        /* Huvudinnehåll som visas efter animation */
        main {
            display: none;
            padding-top: 100px; /* Skapa utrymme för headern */
        }

        body.loaded main {
            display: block;
        }

        /* Övriga stilar, inklusive galleriet */
        #photo-gallery {
            display: flex;
            gap: 10px;
            justify-content: flex-start;
            align-items: flex-start;
            flex-wrap: nowrap;
            overflow-x: auto;
            overflow-y: hidden;
        }

        #photo-gallery img {
            display: inline-block;
            width: auto;
            height: 50vh; /* Anpassa höjden för desktop */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.5s;
        }
    </style>
</head>
<body>
    <header id="header" class="fraunces-unique">
        PHILIP STOCKENHED
    </header>

    <main>
        <section id="photo-gallery"></section>
    </main>

    <script>
        // Funktion för att flytta headern diagonalt uppåt och ladda in resten av sidan
        window.onload = function() {
            setTimeout(() => {
                document.getElementById('header').classList.add('move-header');
            }, 1000); // Vänta 1 sekund innan headern börjar flytta sig

            setTimeout(() => {
                document.body.classList.add('loaded'); // Efter animationen, visa resten av sidan
            }, 3000); // Vänta tills headern har flyttat sig innan resten laddas
        };

        let photos = [];
        let currentIndex = 0;
        let currentPhotoIndex = 0; // Hålla koll på aktuellt foto som visas
        const photosToLoad = 5; // Antal bilder att ladda vid varje skrollning

        // Funktion för att hämta bilder från din PythonAnywhere API
        async function fetchPhotos() {
            const response = await fetch('https://turbomannen.eu.pythonanywhere.com/fetch_photos');
            const data = await response.json();
            photos = data;
            displayPhotos(photos.slice(0, photosToLoad));
            currentPhotoIndex += photosToLoad;
        }

        // Funktion för att visa bilderna på sidan
        function displayPhotos(photosToDisplay) {
            const gallery = document.getElementById('photo-gallery');
            photosToDisplay.forEach((photo, index) => {
                const imgElement = document.createElement('img');
                imgElement.src = photo.url;
                imgElement.alt = photo.title;
                imgElement.onclick = () => openModal(currentPhotoIndex - photosToLoad + index);
                gallery.appendChild(imgElement);

                const observer = new IntersectionObserver(entries => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            imgElement.style.opacity = 1;
                            observer.unobserve(imgElement);
                        }
                    });
                });

                observer.observe(imgElement);
            });
        }

        fetchPhotos();
    </script>
</body>
</html>
